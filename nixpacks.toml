# Configuração Nixpacks para aplicação Node.js + TypeScript
# Provider: Node.js (detectado automaticamente via package.json)
# Node.js 22 será usado via engines.node no package.json

[providers]
node = true

[phases.setup]
nixPkgs = ["...", "nodejs-22_x"]

[phases.install]
cmds = [
  "npm ci --omit=dev",
  "npm run build:server"
]

[phases.build]
cmds = [
  "mkdir -p server/uploads",
  "mkdir -p dist-client"
]

[start]
cmd = "npx ts-node server/src/server.ts"
